---
description: 要件定義書から設計書を作成する
argument-hint: [requirements-file]
---

# 要件定義→設計

## 参照する前提
- 常に @family.md を読み、技術スタック/非機能要件/用語を把握する。
- 追加の要件定義書があれば $ARGUMENTS をそのパスとして読み、内容を優先して反映する。
- 不明点は最小限の質問に絞って確認する（権限境界、データ保持、通知条件など）。

## 手順
1. 要件定義からスコープ、ユーザー種別、ユビキタス言語、主要ユースケースを抽出する。
2. 機能要件を画面・機能・データの観点で整理する。
3. 技術スタックに合わせたアーキテクチャを設計する（React Native + Expo / Firebase Auth / Firestore / Storage / FCM）。
4. Firestore中心のデータモデルを設計する（コレクション、主要フィールド、参照、インデックス、保持/削除）。
5. 権限/セキュリティ（Security Rules方針、招待コード、退会時の削除）を設計する。
6. 画面設計（一覧、遷移、主要フロー、状態管理の粒度）を整理する。
7. 非機能要件（性能・可用性/オフライン・アクセシビリティ）への対応方針を明記する。
8. TDD前提のテスト戦略（単体/統合/E2E、モック方針）を記載する。

## 出力
- @.claude/commands/references/design-template.md をテンプレートとして埋める。
- 日本語で簡潔に、要件の用語（ファミリー/掲示板/投稿 など）を使う。
- 仮定した点と未確定事項は最後に「前提/未確定事項」として列挙する。
